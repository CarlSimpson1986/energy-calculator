<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Personal Energy & Macro Blueprint</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      font-family: Arial, sans-serif;
      background:#f4f4f4;
      margin:0;
      padding:0;
    }
    .container {
      max-width:600px;
      margin:40px auto;
      background:#fff;
      padding:24px;
      border-radius:8px;
      box-shadow:0 4px 12px rgba(0,0,0,0.08);
    }
    h1 { margin-top:0; }
    p { line-height:1.5; color:#444; }
    label {
      display:block;
      margin-top:16px;
      font-weight:bold;
    }
    input, select, button {
      width:100%;
      padding:10px;
      margin-top:6px;
      font-size:16px;
    }
    button {
      margin-top:24px;
      background:#000;
      color:#fff;
      border:none;
      cursor:pointer;
    }
    .error {
      color:#b00020;
      margin-top:12px;
      font-weight:bold;
    }
    #results {
      display:none;
      margin-top:24px;
      border-top:2px solid #eee;
      padding-top:20px;
    }
  </style>
</head>

<body>
<div class="container">

<h1>Your Personal Energy & Macro Blueprint</h1>
<p><em>Your energy is your ultimate KPI.</em></p>

<p>
This isn’t a generic calorie calculator.  
It gives you a realistic daily energy target and macro breakdown based on your goal and how you actually live.
</p>

<label>Sex</label>
<select id="sex">
  <option value="">Select</option>
  <option value="male">Male</option>
  <option value="female">Female</option>
</select>

<label>Age (years)</label>
<input type="number" id="age" min="16" max="80">

<label>Height (cm)</label>
<input type="number" id="height" min="140" max="220">

<label>Weight (kg)</label>
<input type="number" id="weight" min="40" max="200">

<label>Activity level</label>
<select id="activity_level">
  <option value="">Select</option>
  <option value="sedentary">
    Mostly sedentary (desk job, &lt;5k steps/day, little exercise)
  </option>
  <option value="light">
    Lightly active (1–3 gym sessions/week, ~6–8k steps/day)
  </option>
  <option value="moderate">
    Moderately active (3–5 sessions/week, ~8–12k steps/day)
  </option>
  <option value="very_active">
    Very active (6+ sessions/week, physical job or 12k+ steps/day)
  </option>
</select>

<label>Main goal</label>
<select id="goal">
  <option value="">Select</option>
  <option value="fat_loss">Lose body fat</option>
  <option value="maintain">Maintain current weight</option>
  <option value="muscle_gain">Build muscle</option>
</select>

<label>Eating preference</label>
<select id="nutrition_style">
  <option value="">Select</option>
  <option value="high_carb">Higher-carb</option>
  <option value="balanced">Balanced</option>
  <option value="low_carb">Lower-carb</option>
</select>

<label>Meals per day</label>
<select id="meals_per_day">
  <option value="">Select</option>
  <option value="3">3</option>
  <option value="4">4</option>
  <option value="5">5</option>
</select>

<button id="generateBtn">Generate My Plan</button>

<div id="error" class="error"></div>

<div id="results">
  <h2>Your Results</h2>
  <p><strong>Target Daily Energy:</strong> <span id="calories"></span> kcal</p>
  <ul>
    <li>Protein: <span id="protein"></span> g</li>
    <li>Carbohydrates: <span id="carbs"></span> g</li>
    <li>Fats: <span id="fats"></span> g</li>
  </ul>
</div>

</div>

<script>
document.getElementById("generateBtn").onclick = function () {

  const v = id => document.getElementById(id).value;
  const error = document.getElementById("error");

  if (!v("sex") || !v("age") || !v("height") || !v("weight") ||
      !v("activity_level") || !v("goal") || !v("nutrition_style") || !v("meals_per_day")) {
    error.innerText = "Please complete all fields.";
    return;
  }

  error.innerText = "";

  const sex = v("sex");
  const age = +v("age");
  const height = +v("height");
  const weight = +v("weight");

  // BMR – Mifflin-St Jeor
  const bmr = sex === "male"
    ? (10 * weight + 6.25 * height - 5 * age + 5)
    : (10 * weight + 6.25 * height - 5 * age - 161);

  // Activity multiplier
  const activity = {
    sedentary: 1.2,
    light: 1.375,
    moderate: 1.55,
    very_active: 1.725
  }[v("activity_level")];

  // Goal adjustment
  const goal = {
    fat_loss: 0.8,
    maintain: 1.0,
    muscle_gain: 1.1
  }[v("goal")];

  const calories = Math.round(bmr * activity * goal);

  // Protein
  const protein = Math.round(weight * 1.8);

  // Fat & carbs
  const fatPct = {
    high_carb: 0.25,
    balanced: 0.30,
    low_carb: 0.45
  }[v("nutrition_style")];

  const fats = Math.round((calories * fatPct) / 9);
  let carbs = Math.round((calories - (protein * 4 + fats * 9)) / 4);

  if (v("nutrition_style") === "low_carb" && carbs < 75) {
    carbs = 75;
  }

  document.getElementById("results").style.display = "block";
  document.getElementById("calories").innerText = calories;
  document.getElementById("protein").innerText = protein;
  document.getElementById("carbs").innerText = carbs;
  document.getElementById("fats").innerText = fats;
};
</script>

</body>
</html>
